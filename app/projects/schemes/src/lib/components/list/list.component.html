<mat-grid-list [cols]="cols"
               gutterSize="20"
               [rowHeight]="aspect"
               infiniteScroll
               [infiniteScrollDistance]="2"
               [infiniteScrollThrottle]="150"
               [infiniteScrollContainer]="'.mat-sidenav-content'"
               [infiniteScrollDisabled]="!isLoading"
               [immediateCheck]="true"
               [fromRoot]="true"
               (scrolled)="onScroll()">
  <mat-grid-tile *ngFor="let scheme of schemes$|async; index as ix; trackBy: trackById">
    <mat-card [tabindex]="100+ix"
              [attr.sid]="scheme.id"
              (click)="expand(scheme)"
              matTooltip="Open details">
      <mat-card-header>
        <!-- <mat-icon mat-card-avatar
                  fxFlexAlign="center"
                  [matTooltip]="scheme.side === 'dark' ? 'Dark color scheme' : 'Light color scheme'">
          {{scheme.side === 'dark' ? 'brightness_3' : 'wb_sunny'}}
        </mat-icon> -->
        <span mat-card-title>{{scheme.name}}</span>
        <span mat-card-subtitle
              [matTooltip]="scheme.publisher.community ? 'Community member' : 'Midnight Lizard team'">
          by {{scheme.publisher.name}}
          <mat-icon color="accent">{{scheme.publisher.community ? 'people' : 'verified_user'}}</mat-icon>
        </span>
        <span fxFlex></span>
        <button mat-icon-button
                fxFlexAlign.md="center"
                ngClass.md="small"
                [color]="scheme.liked ? 'accent' : ''"
                [matTooltip]="scheme.liked ? 'Remove like' : 'Add like'"
                (click)="toggleSchemeLiked(scheme); $event.stopPropagation()">
          <mat-icon *ngIf="scheme.liked"
                    matBadgeColor="warn"
                    matBadgeSize="small"
                    matBadgeOverlap="true"
                    matBadgePosition="below before"
                    [matBadge]="scheme.likes">thumb_up</mat-icon>
          <mat-icon *ngIf="!scheme.liked"
                    matBadgeColor="warn"
                    matBadgeSize="small"
                    matBadgeOverlap="true"
                    matBadgePosition="below before"
                    svgIcon="outline-thumb-up"
                    [matBadge]="scheme.likes"></mat-icon>
        </button>
        <button mat-icon-button
                fxFlexAlign.md="center"
                ngClass.md="small"
                [color]="scheme.favorited ? 'warn' : ''"
                [matTooltip]="scheme.favorited ? 'Remove from favorites' : 'Add to favorites'"
                (click)="toggleSchemeFavorited(scheme); $event.stopPropagation()">
          <mat-icon>{{scheme.favorited ? "favorite" : "favorite_border"}}</mat-icon>
        </button>
      </mat-card-header>
      <schemes-thumbnails [scheme]="scheme"></schemes-thumbnails>
    </mat-card>
  </mat-grid-tile>
</mat-grid-list>